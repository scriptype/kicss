<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CSS custom variables experiments</title>
        <link rel="icon" type="image/png" href="favicon.png" />
        <link rel="stylesheet" href="common.css" />
        <link rel="stylesheet" href="docs.css" />
    </head>

    <body>
        <div class="container">
            <header class="heading">
                <h1>KICSS</h1>
            </header>

            <main class="content">
                <section class="topic">
                    <h2>What is KICSS?</h2>
                    <p><abbr title="Keep It CSS">KICSS</abbr> is a technique for creating dynamically-styled UI components that provide real-time feedback and animations. The goal is to establish an idiomatic and predictable way of empowering UI elements with interactivity, while focusing on keeping the behavior-concerned code separated from style-concerned code. Or, better put, establishing a bridge between these two concerns.</p>
                    <p>Utilizing the power of CSS custom properties lies at the heart of this technique.</p>
                    <p>It's also the name of a small JavaScript library that can help you achieve that goal.</p>
                    <p>KICSS stands for "Keep It CSS". Naming is inspired by the famous programming motto <abbr title="Keep it simple, stupid">KISS</abbr>. "It" in the name refers only to style-concerned code.</p>
                </section>

                <section class="topic">
                    <h2>Why?</h2>
                    <p>If followed, this approach should help you replacing much of your dynamically-generated CSS code with static, pure CSS that can deliver the same dynamic styling needs. This doesn't mean you have to leave your existing setup behind and go pure CSS. It's just a mental guideline for creating dynamic UI elements. Whether you use a CSS-in-JS tech or CSS Modules or a pre-processor language is irrelevant. However, it may reduce your need for these tools.</p>
                    <p>If you (optionally) use the JavaScript library, you can easily interpolate dynamic values and create components with nice, real-time animations.</p>
                </section>

                <section class="topic">
                    <h2>Here's what this is all about</h2>
                    <p>Why don't we use CSS custom properties to communicate the interactivity needs of our UI to our CSS code so that we can implement a greater portion of interactivity right in the CSS? This would allow us to take more advantage of built-in CSS features such as hardware accelarated transitions and animations, snappy smooth scroll, HSL color scheme and many more.</p>
                    <p>Please check the examples below to understand the idea better.</p>
                </section>

                <section class="topic">
                    <h2>Example 1</h2>
                    <p>Here's an example of how one could implement the parallax interactivity.</p>
                    <h3>Before:</h3>
                    <pre>
// js
window.addEventListener('scroll', (event) => {
    const scrollTop = document.document.scrollTop
    parallaxLayer1.style.cssText += 'transform: translateY(${scrollTop / 10}px);'
    parallaxLayer2.style.cssText += 'transform: translateY(${scrollTop / 5}px);'
    parallaxLayer3.style.cssText += 'transform: translateY(${scrollTop / 2}px);'
})
</pre>
                    <h3>After:</h3>
                    <pre>
// js
kicss.reportGlobals({ scroll: true })
kicss.reportIndex('.parallax-layer', { start: 1 })

/* css */
.parallax-layer {
    --parallax-amount: calc( var(--scroll-y) / (10 / var(--index)) );
    transform: translateY(var(--parallax-amount));
    will-change: transform;
}
</pre>
                </section>

                <section class="topic">
                    <h2>Example 2</h2>
                    <p>The for loop in this SCSS code can be used to specify a dynamic <code>width</code> for each <code>.item</code> based on its order in the parent element. It generates 10 CSS rules when compiled.</p>
                    <pre>
@for $i from 1 through 10 {
    .item:nth-child(#{$i}) {
        width: $i * 50px;
    }
}
</pre>
                </section>

                <section class="topic">
                    <h2>How to decouple UI logic code from CSS if styling depends on dynamic values?</h2>
                    <p>Coming soon...</p>
                </section>
                <section class="topic">
                    <h2>Examples</h2>
                    <ul>
                        <li><a href="examples/camera">Camera</a></li>
                        <li><a href="examples/doodle-1">Doodle 1</a></li>
                        <li><a href="examples/doodle-2">Doodle 2</a></li>
                        <li><a href="examples/carousel-horizontal">Carousel Horizontal</a></li>
                        <li><a href="examples/carousel-horizontal-2">Carousel Horizontal 2</a></li>
                        <li><a href="examples/parallax-cursor">Parallax Cursor</a></li>
                        <li><a href="examples/parallax-page">Parallax Page</a></li>
                        <li><a href="examples/parallax-scroll">Parallax Scroll</a></li>
                        <li><a href="examples/particles-following-cursor">Particles Following Cursor</a></li>
                        <li><a href="examples/progressbar">Progress Bar</a></li>
                        <li><a href="examples/progresscar">Progress Car</a></li>
                        <li><a href="examples/preserved-contrast">Preserved Contrast</a></li>
                        <li><a href="examples/scroll-content">Scroll Content</a></li>
                        <li><a href="examples/staggered-animation">Staggered Animation</a></li>
                        <li><a href="examples/telegram-spinner">Telegram Spinner</a></li>
                    </ul>
                </section>

                <section class="topic">
                    <h2>Usage</h2>

                    <section class="sub-topic">
                        <h3>Option 1: Include the script in HTML:</h3>
                        <pre>&lt;script type="module" src="reporter.js"&gt;&lt;/script&gt;</pre>
                        <p>If you want Reporter to report some page-level (global)
                        properties, you can still achieve it by asking it from
                        Reporter this way:</p>
                        <pre>&lt;script type="module" src="reporter.js?report=cursor,scroll"&gt;&lt;/script&gt;</pre>
                        <p>Available global properties to ask: <code>cursor</code>, <code>scroll</code>.</p>
                        <p>If you use Reporter this way, then you can access it from
                        the global window object.</p>
                        <p>An example of using Reporter that way would be:</p>
                        <pre>window.Reporter.reportVariable('--kele', 3)</pre>
                    </section>

                    <section class="sub-topic">
                        <h3>Option 2: Import as module</h3>
                        <pre>
import { reportGlobals, reportVariable, reportScroll } from 'reporter'

reportGlobals({
    cursor: true,
    scroll: true
})

reportVariable('--gret', 4)

const container = document.getElementById('container')

container.addEventListener('scroll', reportScroll({
    direction: 'horizontal',
    name: '--container-scroll'
}))</pre>
                    </section>
                </section>

                <section class="topic">
                    <h2>API</h2>

                    <section class="sub-topic">
                        <h3>reportScroll(name | options, direction | options)</h3>
                        <p>Will report scroll values. Should be used as the scroll event handler on the element.</p>
                        <p>Parameters:</p>
                        <ul>
                            <li>name: string</li>
                            <li>direction: 'horizontal' | 'vertical'</li>
                            <li>options:
                                <ul>
                                    <li>name: string</li>
                                    <li>direction: 'horizontal' | 'vertical'</li>
                                    <li>interpolations?: Interpolation[]</li>
                                </ul>
                            </li>
                        </ul>
                        <p>Usage examples:
                        <a href="examples/carousel-horizontal">Carousel Horizontal</a>,
                        <a href="examples/scroll-content">Scroll Content</a></p>
                    </section>

                    <section class="sub-topic">
                        <h3>reportVariable(name, value | options)</h3>
                        <p>Will assign a css property to an element if scope is present, otherwise to :root</p>
                        <p>If value is provided as a function, then it will be treated as a responsive variable and refreshed if window dimensions change.</p>
                        <p>Parameters:</p>
                        <ul>
                            <li>name: string</li>
                            <li>value: function | any</li>
                            <li>options:
                                <ul>
                                    <li>value: function | any</li>
                                    <li>scope?: DOMNode (default: documentElement)</li>
                                </ul>
                            </li>
                        </ul>
                        <p>Usage examples:
                        <a href="examples/carousel-horizontal">Carousel Horizontal</a>,
                        <a href="examples/scroll-content">Scroll Content</a>
                        <a href="examples/staggered-animation">Staggered Animation</a>
                        <a href="examples/progresscar">Progress Car</a></p>
                    </section>

                    <section class="sub-topic">
                        <h3>reportIndex(selector, options)</h3>
                        <p>Will run the query for the given selector, and assign an index css property to each item. If the 'rowIndexBy' option is present, a row index will be also assigned.</p>
                        <p>Parameters:</p>
                        <ul>
                            <li>selector: string</li>
                            <li>options:
                                <ul>
                                    <li>indexVariableName?: string (default: '--index')</li>
                                    <li>rowIndexVariableName?: string (default: '--row-index')</li>
                                    <li>rowIndexBy?: number</li>
                                </ul>
                            </li>
                        </ul>
                        <p>Usage examples:
                        <a href="examples/doodle-1">Doodle 1</a>,
                        <a href="examples/doodle-2">Doodle 2</a>
                        <a href="examples/staggered-animation">Staggered Animation</a></p>
                    </section>

                    <section class="sub-topic">
                        <h3>reportGlobals(options)</h3>
                        <p>Will report global properties.</p>
                        <p>options?: (default: { scroll: true, cursor: true })</p>
                        <ul>
                            <li>scroll?: boolean (default: true)</li>
                            <li>cursor?: boolean (default: true)</li>
                        </ul>
                        <p>Usage examples:
                        <a href="examples/doodle-1">Doodle 1</a>,
                        <a href="examples/doodle-2">Doodle 2</a>
                        <a href="examples/preserved-contrast">Preserved Contrast</a></p>
                    </section>
                </section>

                <section class="topic">
                    <h2>Types</h2>

                    <section class="sub-topic">
                        <h3>Interpolation</h3>
                        <ul>
                            <li>name: string</li>
                            <li>inputRange: number[]</li>
                            <li>outputRange: number[]</li>
                            <li>scope?: DOMNode (default: documentElement)</li>
                            <li>cache?: boolean (default: true)</li>
                            <li>cacheDuration?: number (milliseconds) (default:  300)</li>
                        </ul>
                    </section>
                </section>
            </main>
        </div>
        <script src="docs.js"></script>
    </body>

</html>
